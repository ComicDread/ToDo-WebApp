{"ast":null,"code":"var _s = $RefreshSig$();\nimport { GET_TASKS, DELETE_TASKS } from \"../../queries/query\";\nimport { useMutation, useQuery } from '@apollo/client';\nimport React, { useEffect } from 'react';\nconst currentUserToken = JSON.parse(localStorage.getItem('currentUser'));\nconst currentUserName = JSON.parse(localStorage.getItem('currentUserName'));\nfunction RemoveAllTasks() {\n  _s();\n  const [deleteAllTasksMutation] = useMutation(DELETE_TASKS);\n  const {\n    data: tasksData\n  } = useQuery(GET_TASKS, {\n    variables: {\n      token: currentUserToken,\n      userName: currentUserName\n    }\n  });\n  useEffect(() => {\n    async function remove() {\n      const taskIds = tasksData.tasks.map(task => task.id);\n      await deleteAllTasksMutation({\n        variables: {\n          token: currentUserToken,\n          id: taskIds\n        },\n        update: cache => {\n          cache.writeQuery({\n            query: GET_TASKS,\n            variables: {\n              token: currentUserToken,\n              userName: currentUserName\n            },\n            data: {\n              tasks: []\n            }\n          });\n        }\n      });\n    }\n    remove();\n  }, [deleteAllTasksMutation, tasksData, currentUserToken, currentUserName]);\n  return null;\n}\n_s(RemoveAllTasks, \"ShzMEbYWWoUIQKOhMOHZYlXaE5s=\", false, function () {\n  return [useMutation, useQuery];\n});\n_c = RemoveAllTasks;\nexport default RemoveAllTasks;\nvar _c;\n$RefreshReg$(_c, \"RemoveAllTasks\");","map":{"version":3,"names":["GET_TASKS","DELETE_TASKS","useMutation","useQuery","React","useEffect","currentUserToken","JSON","parse","localStorage","getItem","currentUserName","RemoveAllTasks","_s","deleteAllTasksMutation","data","tasksData","variables","token","userName","remove","taskIds","tasks","map","task","id","update","cache","writeQuery","query","_c","$RefreshReg$"],"sources":["/Users/andrea/Desktop/ITS Prodigi/Seacom/Application/Todo/Full Stack ToDo login elasticEmongo/client/src/components/functions/RemoveAllTasks.js"],"sourcesContent":["import { GET_TASKS, DELETE_TASKS } from \"../../queries/query\";\nimport { useMutation, useQuery } from '@apollo/client';\nimport React, { useEffect } from 'react';\n\nconst currentUserToken = JSON.parse(localStorage.getItem('currentUser'));\nconst currentUserName = JSON.parse(localStorage.getItem('currentUserName'));\n\nfunction RemoveAllTasks() {\n  const [deleteAllTasksMutation] = useMutation(DELETE_TASKS);\n  const { data: tasksData } = useQuery(GET_TASKS, {\n    variables: {\n      token: currentUserToken,\n      userName: currentUserName\n    }\n  });\n\n  useEffect(() => {\n    async function remove() {\n      const taskIds = tasksData.tasks.map((task) => task.id);\n      await deleteAllTasksMutation({\n        variables: {\n          token: currentUserToken,\n          id: taskIds\n        },\n        update: (cache) => {\n          cache.writeQuery({\n            query: GET_TASKS,\n            variables: {\n              token: currentUserToken,\n              userName: currentUserName\n            },\n            data: { tasks: [] },\n          });\n        },\n      });\n    }\n    \n    remove();\n  }, [deleteAllTasksMutation, tasksData, currentUserToken, currentUserName]);\n\n  return null; \n}\n\nexport default RemoveAllTasks;\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,YAAY,QAAQ,qBAAqB;AAC7D,SAASC,WAAW,EAAEC,QAAQ,QAAQ,gBAAgB;AACtD,OAAOC,KAAK,IAAIC,SAAS,QAAQ,OAAO;AAExC,MAAMC,gBAAgB,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC;AACxE,MAAMC,eAAe,GAAGJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAE3E,SAASE,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,sBAAsB,CAAC,GAAGZ,WAAW,CAACD,YAAY,CAAC;EAC1D,MAAM;IAAEc,IAAI,EAAEC;EAAU,CAAC,GAAGb,QAAQ,CAACH,SAAS,EAAE;IAC9CiB,SAAS,EAAE;MACTC,KAAK,EAAEZ,gBAAgB;MACvBa,QAAQ,EAAER;IACZ;EACF,CAAC,CAAC;EAEFN,SAAS,CAAC,MAAM;IACd,eAAee,MAAMA,CAAA,EAAG;MACtB,MAAMC,OAAO,GAAGL,SAAS,CAACM,KAAK,CAACC,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,CAAC;MACtD,MAAMX,sBAAsB,CAAC;QAC3BG,SAAS,EAAE;UACTC,KAAK,EAAEZ,gBAAgB;UACvBmB,EAAE,EAAEJ;QACN,CAAC;QACDK,MAAM,EAAGC,KAAK,IAAK;UACjBA,KAAK,CAACC,UAAU,CAAC;YACfC,KAAK,EAAE7B,SAAS;YAChBiB,SAAS,EAAE;cACTC,KAAK,EAAEZ,gBAAgB;cACvBa,QAAQ,EAAER;YACZ,CAAC;YACDI,IAAI,EAAE;cAAEO,KAAK,EAAE;YAAG;UACpB,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ;IAEAF,MAAM,CAAC,CAAC;EACV,CAAC,EAAE,CAACN,sBAAsB,EAAEE,SAAS,EAAEV,gBAAgB,EAAEK,eAAe,CAAC,CAAC;EAE1E,OAAO,IAAI;AACb;AAACE,EAAA,CAlCQD,cAAc;EAAA,QACYV,WAAW,EAChBC,QAAQ;AAAA;AAAA2B,EAAA,GAF7BlB,cAAc;AAoCvB,eAAeA,cAAc;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}